import{r as t,j as e,F as N,C as u,T as n,x as o,Y as b,y as x,a4 as p,z as v,a5 as w,G as L,a6 as D,L as z}from"./index-ZK5s_Wys.js";import{l as B}from"./drug-DrWeykhr.js";import{S as $}from"./SearchBar-BJ3JTHTw.js";import{A}from"./Alert-BHcqbS_G.js";import{C as E}from"./CardActions-ByaY6a6t.js";import"./axios-BH6LnKjt.js";import"./index-Dq7h7Pqt.js";import"./TextField-BqMvV1-A.js";import"./Menu-ZUp_UOV4.js";import"./Alert-l4XM499c.js";const O=()=>{const[m,f]=t.useState([]),[r,l]=t.useState([]),[a,j]=t.useState(""),[g,y]=t.useState(!0),[d,S]=t.useState(null);t.useEffect(()=>{B().then(s=>{f(s),l(s)}).catch(s=>{console.error(s),S("Failed to load drugs.")}).finally(()=>y(!1))},[]);const h=s=>{if(j(s),!s.trim()){l(m);return}const c=s.toLowerCase().trim(),C=m.filter(i=>i.name.toLowerCase().includes(c)||i.manufacturer&&i.manufacturer.toLowerCase().includes(c)||i.description&&i.description.toLowerCase().includes(c));l(C)};return g?e.jsx(N,{text:"Loading medications..."}):d?e.jsx(u,{children:e.jsx(n,{color:"error",align:"center",className:"mt-8 text-center",children:d})}):e.jsxs(u,{sx:{py:4},children:[e.jsxs(o,{className:"flex justify-between items-center mb-6 flex-wrap",children:[e.jsx(n,{variant:"h4",gutterBottom:!0,className:"mb-0",children:"Available Medications"}),e.jsx(o,{sx:{width:{xs:"100%",sm:300},mt:{xs:2,sm:0}},children:e.jsx($,{placeholder:"Search medications...",onSearch:h,initialValue:a,minSearchLength:2})})]}),a&&e.jsx(o,{className:"mb-4",children:e.jsxs(b,{className:"p-3 bg-gray-100",children:[e.jsx(n,{variant:"body2",className:"mb-2",children:r.length===0?`No medications found matching "${a}"`:`Found ${r.length} medication${r.length!==1?"s":""} matching "${a}"`}),r.length===0&&e.jsx(x,{size:"small",onClick:()=>h(""),variant:"outlined",children:"Clear Search"})]})}),r.length===0&&!a?e.jsx(A,{type:"info",message:"No medications are currently available.",isStatic:!0}):e.jsx(p,{container:!0,spacing:3,children:r.map(s=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(v,{className:"h-full flex flex-col hover:shadow-lg transition-shadow",children:[e.jsxs(w,{className:"flex-grow",children:[e.jsx(n,{variant:"h6",className:"font-bold",children:s.name}),e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,className:"mb-2",children:s.manufacturer}),e.jsx(L,{className:"my-2"}),e.jsx(o,{className:"mt-2",children:e.jsx(D,{label:s.prescriptionRequired?"Prescription required":"Over-the-counter",color:s.prescriptionRequired?"primary":"success",size:"small",variant:"outlined"})})]}),e.jsx(E,{children:e.jsx(x,{component:z,to:`/drugs/${s.id}`,size:"small",color:"primary",children:"View Details"})})]})},s.id))})]})};export{O as default};
