import{r as i,q as y,j as e,E as j,C as c,T as t,$ as d,z as f,a0 as g,y as m}from"./index-CkHtwYmJ.js";import{l as v}from"./prescription-CR_S8DG3.js";import{A}from"./Alert-CeTGSqaQ.js";import{C}from"./CardActions-CsGG2Wbr.js";import"./index-Dq7h7Pqt.js";const L=()=>{const[n,l]=i.useState([]),[x,p]=i.useState(!0),[o,h]=i.useState(null),u=y();return i.useEffect(()=>{(async()=>{try{const s=await v();let a=[];Array.isArray(s)?a=s:s&&Array.isArray(s.content)?a=s.content:console.warn("Unexpected prescriptions payload shape:",s),l(a)}catch(s){h(s.message||"Failed to load prescriptions")}finally{p(!1)}})()},[]),x?e.jsx(j,{text:"Loading prescriptions..."}):o?e.jsx(c,{sx:{py:4},children:e.jsx(A,{severity:"error",children:o})}):e.jsxs(c,{sx:{py:4},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Your Prescriptions"}),n.length===0?e.jsx(t,{children:"No prescriptions found."}):e.jsx(d,{container:!0,spacing:3,children:n.map(r=>e.jsx(d,{item:!0,xs:12,md:6,children:e.jsxs(f,{variant:"outlined",children:[e.jsxs(g,{children:[e.jsx(t,{variant:"h6",fontWeight:"bold",children:r.drugName}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Dosage: ",r.dosage]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Frequency: ",r.frequency]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Issued: ",new Date(r.issuedAt).toLocaleDateString()]}),e.jsxs(t,{variant:"body2",color:"text.secondary",children:["Expires: ",new Date(r.expiresAt).toLocaleDateString()]})]}),e.jsx(C,{children:e.jsx(m,{size:"small",onClick:()=>u(`/prescriptions/${r.id}`),children:"View Details"})})]})},r.id))})]})};export{L as default};
